/* FILE: web/src/styles.css
   Responsive layout, mobile-friendly grid, and dark mode via CSS variables. */

/* Reset + variables */
*, *::before, *::after { box-sizing: border-box; }
html, body, #root { height: 100%; }
body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background: var(--bg); color: var(--text); }

:root {
  --bg: #f5f7fb;
  --card: #ffffff;
  --text: #111827;
  --muted: #6b7280;
  --border: #e5e7eb;
  --shadow: 0 6px 18px rgba(15, 23, 42, 0.06);
  --accent: #f59e0b; /* amber */
  --accent-contrast: #1f2937;
  --badge-low: #d1fae5;      --badge-low-text: #065f46;
  --badge-med: #dbeafe;      --badge-med-text: #1e40af;
  --badge-high: #fee2e2;     --badge-high-text: #991b1b;
  --badge-critical: #fde68a; --badge-critical-text: #92400e;
  --btn-bg: #f3f4f6;         --btn-text: #111827; --btn-border: #e5e7eb;
  --btn-primary-bg: #f59e0b; --btn-primary-text: #1f2937;
}

[data-theme="dark"] {
  --bg: #0f172a;
  --card: #0b1220;
  --text: #c5c6bd;
  --muted: #9ca3af;
  --border: #1f2937;
  --shadow: 0 6px 18px rgba(0, 0, 0, .35);
  --accent: #f59e0b;
  --accent-contrast: #0b1220;
  --badge-low: #064e3b;      --badge-low-text: #a7f3d0;
  --badge-med: #1e3a8a;      --badge-med-text: #bfdbfe;
  --badge-high: #7f1d1d;     --badge-high-text: #fecaca;
  --badge-critical: #92400e; --badge-critical-text: #f4f3e8;
  --btn-bg: #111827;         --btn-text: #e5e7eb; --btn-border: #1f2937;
  --btn-primary-bg: #f59e0b; --btn-primary-text: #0b1220;
}

/* Page + cards */
/* put in your styles.css */
.md-page { max-width: 1100px; margin: 24px auto; padding: 0 16px; }
.md-card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; box-shadow: var(--shadow); overflow: hidden; }
.md-header { display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; border-bottom: 1px solid var(--border); }
.md-title { margin: 0; font-size: 22px; font-weight: 700; }

/* prevent the page-size control from stretching */
.pg-size {
  display: inline-flex;      /* creates a new flex context */
  flex: 0 0 auto;            /* don't grow in the parent row */
}

/* keep the select compact */
.pg-size .md-select {
  width: auto !important;    /* override any width:100% */
  min-width: 110px;          /* adjust to taste */
  max-width: 12rem;          /* safety cap */
  flex: 0 0 auto !important; /* ignore flex:1 rules targeting .md-select */
  display: inline-block;     /* ensures it only takes needed space */
}


.md-content { padding: 16px 20px; }

/* Grid helpers */
.md-grid { display: grid; gap: 12px; }
.md-grid.cols-2 { grid-template-columns: 1fr 1fr; }
@media (max-width: 900px) { .md-grid.cols-2 { grid-template-columns: 1fr; } }

/* Fields */
.md-field label { display: block; font-size: 12px; color: var(--muted); margin-bottom: 6px; }
.md-input, .md-textarea, .md-select { width: 100%; border: 1px solid var(--border); background: transparent; color: var(--text); border-radius: 10px; padding: 10px 12px; outline: none; }
.md-textarea { min-height: 96px; resize: vertical; }

/* Buttons */
.md-actions { display: flex; gap: 8px; align-items: center; }
.btn { background: var(--btn-primary-bg); color: var(--btn-primary-text); border: 1px solid var(--btn-border); padding: 8px 12px; border-radius: 10px; cursor: pointer; }
.btn:hover { filter: brightness(0.98); }
.btn:disabled { opacity: .5; cursor: not-allowed; }
.btn-primary { background: var(--btn-primary-bg); color: var(--btn-primary-text); border-color: transparent; }

/* Badges */
.badge { display: inline-block; padding: 4px 10px; border-radius: 999px; font-size: 12px; font-weight: 600; }
.badge.low { background: var(--badge-low); color: var(--badge-low-text); }
.badge.medium { background: var(--badge-med); color: var(--badge-med-text); }
.badge.high { background: var(--badge-high); color: var(--badge-high-text); }
.badge.critical { background: var(--badge-critical); color: var(--badge-critical-text); }

/* Table */
.md-table-wrap { width: 100%; overflow-x: auto; }
.md-table { width: 100%; border-collapse: collapse; }
.md-table th, .md-table td { text-align: left; padding: 10px 12px; border-top: 1px solid var(--border); }
.md-table thead th { position: sticky; top: 0; background: var(--card); z-index: 1; }

/* Utilities */
.muted { color: var(--muted); font-size: 12px; }

/* Prevent horizontal overflow on mobile */
html, body { overflow-x: hidden; }
.md-card, .md-input, .md-select, .md-textarea { max-width: 100%; }

/* Theme toggle */
.theme-toggle { margin-left: auto; }

/* === Button normalization (consistent size/shape/color + no underline) === */
button.btn, .btn, .btn-primary,
a.btn, a.btn-primary,
input[type="button"].btn, input[type="submit"].btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;

  /* size */
  height: 40px;
  padding: 0 16px;
  border-radius: 10px;
  line-height: 1;
  white-space: nowrap;

  /* look + colors (match your theme vars) */
  background: var(--btn-primary-bg);
  color: var(--btn-primary-text);
  border: 1px solid transparent;
  font-weight: 600;
  text-decoration: none;     /* kill underline for <a> */
  appearance: none;
  -webkit-appearance: none;
}

a.btn, a.btn-primary { text-decoration: none; }
a.btn:hover, a.btn-primary:hover { text-decoration: none; }

/* same hover/disabled behavior */
.btn:hover, .btn-primary:hover { filter: brightness(0.98); }
.btn:disabled, .btn-primary:disabled { opacity: .5; cursor: not-allowed; }

/* === Equal widths in action rows (Create/Export, Apply/Clear) === */
.md-actions .btn, .md-actions .btn-primary {
  flex: 0 0 160px;          /* make siblings same width; tweak value if desired */
}

/* === Equal widths in grid rows (CSV download two-column grid) === */
.md-grid .btn, .md-grid .btn-primary {
  width: 100%;              /* each button fills its grid column â†’ equal widths */
}

/* Optional: clearer focus ring */
.btn:focus-visible, .btn-primary:focus-visible, a.btn:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}
/* Address row sizing (restore original look) */
.addr-row {
  display: grid;
  grid-template-columns: minmax(320px, 1fr) 160px; /* wide input + compact button */
  gap: 12px;
}
.addr-btn { width: auto; }

/* Clickable cells that look like text */
.linklike {
  background: none;
  border: none;
  padding: 0;
  font: inherit;
  color: inherit;         /* not blue */
  cursor: pointer;
}
.linklike:hover { text-decoration: underline; }

/* subtle clickable table cell */
.cell-click { cursor: pointer; }
.cell-click:focus { outline: 2px solid var(--accent); outline-offset: 2px; }
.cell-click:hover { text-decoration: underline; }

/* pulsing pin (black outer ring, neon orange-red center) */
.pulse-pin {
  width: 18px; height: 18px; border-radius: 50%;
  background: #ff5722; /* neon orange-red */
  border: 3px solid #000;             /* black outer ring */
  box-shadow: 0 0 12px rgba(255, 87, 34, .95);
  position: relative;
  transform: translate(-9px, -9px);
}
.pulse-pin:after {
  content: "";
  position: absolute; left: 50%; top: 50%;
  width: 18px; height: 18px; border-radius: 50%;
  border: 3px solid rgba(255, 87, 34, 0.9);
  transform: translate(-50%, -50%);
  animation: pulse-ring 1.6s ease-out infinite;
}
@keyframes pulse-ring {
  0%   { transform: translate(-50%, -50%) scale(1);   opacity: .9; }
  70%  { transform: translate(-50%, -50%) scale(2.6); opacity: 0; }
  100% { opacity: 0; }
}
/* map container: full width, fixed height */
.map-container { width: 100%; height: 400px; border-radius: 16px; overflow: hidden; margin-top: 12px; border: 1px solid var(--border); box-shadow: var(--shadow); }
@media (max-width: 600px) { .map-container { height: 300px; } }
